# ETH

## 概念
- 智能合约: （Smart Contracts）智能合约是一段存储在以太坊区块链上的代码，它可以自动执行协议的条款。例如，你可以创建一个智能合约来管理众筹活动，当筹款达到目标时，合约会自动将资金转给项目方。
- 以太币 (ETH): 以太坊的原生货币称为以太币（Ether，简称 ETH）。ETH 是用于支付以太坊网络上的交易费用和计算服务的代币。用户需要支付 ETH 来执行智能合约和转账。
- 以太坊虚拟机 (EVM):以太坊虚拟机（Ethereum Virtual Machine，EVM）是以太坊的核心组件。EVM 是一个图灵完备的虚拟机，它可以执行用以太坊脚本语言（如 Solidity）编写的任意代码。EVM 使得智能合约的执行变得可能。
- DApps (去中心化应用):（Decentralized Applications，DApps）是基于以太坊区块链和智能合约构建的应用程序。与传统应用不同，DApps 没有中央服务器，数据和应用逻辑是分布式的，这使得它们更加透明和安全。
- 以太坊 2.0:以太坊 2.0 引入了股权证明（Proof of Stake, PoS）共识机制，而不是现有的工作量证明（Proof of Work, PoW）。这将大幅减少能耗并提高交易处理速度。
- ERC 标准:以太坊的技术规范，用于创建代币和其他合约。最著名的是 ERC-20 标准.

## ETH1.0和2.0的区别
- 共识：POW->POS
- 性能:15-30笔/秒->数千甚至数万/秒
- 信标链（Beacon Chain）：ETH2.0的核心链，负责协调分片和验证者活动，确保整个网络的同步和共识。
- 安全性:去中心化和抗攻击性：PoS 机制下，恶意攻击者需要持有大量ETH，成本高昂，使得网络更安全。此外，验证者被随机选择，进一步分散风险。
- 智能合约和DApps：更高的吞吐量和更低的费用。
- 扩展性： 分片技术和信标链的引入显著提高了网络的扩展性和吞吐量。

## Epoch（纪元）, Slot（时隙）, Block 和 Block 状态
ETH2.0 按照 epoch 出块，每一个 epoch 有 32 slot，每一个 slot 可以承载 1 个块。
- Slot（时隙）
  -  是以太坊2.0中最基本的时间单位，每个slot都有一个指定的时间长度。在每个 slot 中，可能会有一个区块被提议并添加到链中。
  -  一个 slot 的长度为 12 秒。
  -  在每个 slot 中，网络中的验证者将有机会提议一个新的区块。这些提议者是通过权益证明（PoS）随机选择的。
-  Epoch（纪元）
   -  在 Eth2.0 中，Epoch 用于管理和组织验证者的活动。
   -  一个 Epoch 由 32 个 slot 组成。
   -  由于一个 slot 是12秒，一个 Epoch 的总长度是 384 秒（即6.4分钟）。
   -  在每个 Epoch 结束时，网络会进行状态和共识的检查和调整，包括对验证者的奖励和惩罚。
-  Block（区块）
   -  Block 是包含交易和其他相关数据的记录单元。
   -  一个区块包含区块头、交易列表、状态根哈希、签名等数据。
   -  在每个 slot 开始时，网络会随机选出一个验证者来提议区块。该验证者将创建一个包含新交易和其他必要信息的区块，并广播到网络中。
-  Safe（安全）
   -  指的是一个区块已经被多数验证者接受和认可，超过了一个特定的阈值，但还没有达到最终确定的标准。
- Finalized（最终确定）
  - 是一个区块已经被永久地添加到区块链中，并且不可能被回滚或替代。这是区块链中最强的确认状态。
  - 通过了严格的共识验证，通常需要超过2/3的验证者投票同意。具体来说，两个连续的epoch被最终确定时，意味着在这两个epoch之间的所有区块都被最终确定。
  - 这种状态防止了分叉和双花攻击的可能性。
  - 2个Epoch前的块会进入这个状态。

## 注意请求响应参数
- eth_blockNumber：获取最新块高
  - inalized：返回已经确定的块
  - safe: 返回安全的块
  - atest: 反回最新块
- eth_getBlockByNumber:获取这个区块的信息
  - false: 只返回交易 Hash, 不反回交易体; true 两者都返回，实际工作中用 false
- eth_getTransactionByHash:根据交易 Hash 获取交易详情
  - 根据返回信息里面的from和to地址来判断是充值还是体现。
- eth_getTransactionReceipt:获取交易状态
  - 返回参数：status 为 1 成功，status 为 0 失败。
- eth_getTransactionCount:获取签名需要的参数 Nonce
  - 返回参数:result 值即为签名里面需要的 nonce 值
- eth_gasPrice:获取签名需要的参数 Gas
  - 返回值即为签名里面需要的 gasPrice
- eth_sendRawTransaction:发送交易到区块链网络
  - 返回值为交易 Hash